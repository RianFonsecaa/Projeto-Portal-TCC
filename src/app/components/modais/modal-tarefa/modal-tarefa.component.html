<section
  class="absolute inset-0 flex justify-center items-center z-50 bg-opacity-50 transition-all duration-300 ease-in-out"
  [ngClass]="{ 'opacity-0 pointer-events-none': !modalService.isVisivel('modalTarefa'), 'opacity-100': modalService.isVisivel('modalTarefa') }">

  <!-- Modal background (overlay) -->
  <div class="fixed inset-0 bg-black bg-opacity-30 z-10" (click)="modalService.fechar('modalTarefa')"></div>

  <!-- Modal content -->
  <div
    class="bg-white overflow-hidden rounded-lg shadow-lg z-20 flex flex-col space-y-6 w-[1000px] h-[560px] p-6 text-[#313131] dark:bg-[#2b2b2b] dark:text-white">
    <div class="flex justify-between items-center border-b pb-2">
      <h2 class="text-lg font-semibold">Nova Tarefa / Detalhes da Tarefa</h2>
      <button (click)="modalService.fechar('modalTarefa')">
        <svg width="16" height="16" viewBox="0 0 12 13" xmlns="http://www.w3.org/2000/svg">
          <path d="M1 11.1541L10.95 1M11 11.1541L1.05 1" [attr.stroke]="themeService.darkMode() ? 'white' : '#515151'"
            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>

      </button>
    </div>

    <!-- Div principal flex horizontal -->
    <div class="flex h-full space-x-6 mt-4">
      <!-- Título e Descrição em blocos verticais -->
      <div class="flex flex-col h-full space-y-4 w-1/2">
        <div>
          <div class="flex flex-row items-center gap-1">
            <svg width="16" height="14" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M1 2.02857V1H9.55556V2.02857M4.88889 1V13M2.55556 13H7.22222M8.77778 7.17143V6.14286H15V7.17143M11.8889 6.14286V13M10.7222 13H13.0556"
                stroke="#828282" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <label class="block text-lg font-medium text-gray-700">Título</label>
          </div>
          <input type="text" class="w-full border h-12 border-gray-300 rounded-lg p-2 focus:border-blue-500"
                 [(ngModel)]="tarefa.nomeTarefa"
            placeholder="Digite o título">
        </div>

        <div class="flex flex-col h-full">
          <div class="flex flex-row items-center gap-1">
            <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 1H9M1 4.33333H13M1 7.66667H9M1 11H13" stroke="#828282" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
            <label class="block text-lg font-medium text-gray-700">Descrição</label>
          </div>
          <textarea
            class="w-full flex-grow border border-gray-300 rounded-lg p-2 mt-1 resize-none focus:border-blue-500"
            [(ngModel)]="tarefa.descricao"
            placeholder="Digite a descrição"></textarea>
        </div>
      </div>

      <!-- Campos Prioridade, Status, Classificação e Prazo em flexbox (lado a lado) -->
      <div class="flex flex-col h-full justify-between w-2/3">
        <!-- Prioridade -->
        <div>
          <div class="flex flex-col">
            <div class="flex flex-row space-x-2 items-center">
              <svg class="mb-1" width="16" height="16" viewBox="0 0 16 19" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M14.1222 14.645C13.466 15.6911 12.5512 16.5504 11.4662 17.14C10.387 17.7256 9.17374 18.0196 7.9462 17.993C6.8006 18.0442 5.66136 17.7968 4.6402 17.275C3.61335 16.7498 2.7387 15.9695 2.1002 15.009C-0.571804 10.439 2.3872 6.163 2.9872 5.341C3.52014 4.77075 3.89365 4.07029 4.0702 3.31C4.24785 2.54682 4.22268 1.75044 3.9972 1C5.2812 1.965 10.4272 4.258 9.5222 11.631C11.0182 10.495 12.2222 8.585 12.3682 5.415C13.7982 6.476 16.3532 10.877 14.1222 14.645Z"
                  stroke="#828282" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
              <label class="block text-md font-medium text-gray-700">Prioridade</label>
            </div>
            <div class="flex flex-row justify-between space-x-3 items-center align-middle w-full p-1 text-[14px]">
              <div class="flex space-x-2 items-center mb-4 w-full">
                <input id="default-radio-1" type="radio" value="baixa" name="default-radio-1" [(ngModel)]="tarefa.prioridade"
                  class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <div class="flex flex-row w-full space-x-2 px-4 py-1 items-center bg-gray-200 rounded-md font-medium">
                  <span class="h-[15px] w-[5px] align-middle rounded-md bg-yellow-400"></span>
                  <span>Baixa</span>
                </div>
              </div>
              <div class="flex space-x-2 items-center mb-4 w-full">
                <input id="default-radio-2" type="radio" value="media" name="default-radio-1" [(ngModel)]="tarefa.prioridade"
                  class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <div class="flex flex-row w-full space-x-2 px-4 py-1 items-center bg-gray-200 rounded-md font-medium">
                  <span class="h-[15px] w-[5px] align-middle rounded-md bg-orange-500"></span>
                  <span>Média</span>
                </div>
              </div>
              <div class="flex space-x-2 items-center mb-4 w-full">
                <input id="default-radio-3" type="radio" value="alta" name="default-radio-1" [(ngModel)]="tarefa.prioridade"
                  class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <div class="flex flex-row w-full space-x-2 px-4 py-1 items-center bg-gray-200 rounded-md font-medium">
                  <span class="h-[15px] w-[5px] align-middle rounded-md bg-red-500"></span>
                  <span>Alta</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Status -->
        <div>
          <div class="flex flex-col">
            <div class="flex flex-row space-x-2 items-center">
              <svg width="14" height="15" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M1 1V13.5C1 13.721 1.0878 13.933 1.24408 14.0893C1.40036 14.2455 1.61232 14.3333 1.83333 14.3333H14.3333M4.33333 11L6.41667 6.41667L8.91667 8.91667L12.0608 3.5L14.3333 5.7225"
                  stroke="#828282" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
              <label class="block text-md font-medium text-gray-700">Status</label>
            </div>

            <div class="flex flex-row justify-between space-x-3 items-center align-middle w-full p-1 text-[14px]">
              <div class="flex space-x-2 items-center mb-4 w-full">
                <input id="default-radio-2" type="radio" value="paraFazer" name="default-radio-2" [(ngModel)]="tarefa.status"
                  class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <div class="flex flex-row w-full space-x-2 px-4 py-1 items-center bg-gray-200 rounded-md font-medium">
                  <span class="h-[15px] w-[5px] align-middle rounded-md bg-blue-500"></span>
                  <span>Para fazer</span>
                </div>
              </div>
              <div class="flex space-x-2 items-center mb-4 w-full text-[12px]">
                <input id="default-radio-3" type="radio" value="emAndamento" name="default-radio-2" [(ngModel)]="tarefa.status"
                  class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <div class="flex flex-row w-full space-x-2 px-4 py-1 items-center bg-gray-200 rounded-md font-medium">
                  <span class="h-[15px] w-[5px] align-middle rounded-md bg-orange-300"></span>
                  <span>Em Andamento</span>
                </div>
              </div>
              <div class="flex space-x-2 items-center mb-4 w-full">
                <input id="default-radio-3" type="radio" value="concluído" name="default-radio-2" [(ngModel)]="tarefa.status"
                  class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <div class="flex flex-row w-full space-x-2 px-4 py-1 items-center bg-gray-200 rounded-md font-medium">
                  <span class="h-[15px] w-[5px] align-middle rounded-md bg-green-600"></span>
                  <span>Concluído</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Classificação -->
        <div class="flex flex-col w-full">
          <div class="flex items-center gap-2">
            <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M4.4408 1H13M4.4408 6H13M4.4408 11H13M1.00856 1H1.01712M1 6H1.00856M1.00856 11H1.01712"
                stroke="#828282" stroke-width="2" stroke-linecap="round" />
            </svg>
            <label class="block text-md font-medium text-gray-700">Classificação</label>
          </div>
          <div class="flex flex-row ">
            <div class="flex flex-row h-12 border border-gray-200 rounded-md p-1  space-x-2 text-[14px]">

              <div
                class="flex just flex-row  relative pr-6 overflow-x-hidden w-[487px] rounded-md p-1 space-x-2 text-[14px]">
                <!-- Usando ngFor para iterar sobre a lista de nomes -->
                <div *ngFor="let nome of classificacoes" class=" bg-blue-100  px-2 p-1 rounded-md">
                  {{ nome }}
                </div>
                <label *ngIf="classificacoes.length === 0" class="p-1 text-[16px] rounded-md">Escolha as
                  classificações</label>
              </div>

              <div class=" -space-l-4 p-1  right-0 "><span class="font-bold text-gray-600">...</span></div>
            </div>


            <!-- Botão para abrir o dropdown -->
            <button class="bg-gray-200 ml-2 h-full p-2 rounded-md" (click)="toggleDropdown()">
              <svg [ngClass]="{'rotate-45': isRotated}" class="transform transition-transform duration-200" width="18"
                height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="18" height="18" fill="url(#pattern0_305_334)" />
                <defs>
                  <pattern id="pattern0_305_334" patternContentUnits="objectBoundingBox" width="1" height="1">
                    <use xlink:href="#image0_305_334" transform="scale(0.05)" />
                  </pattern>
                </defs>
              </svg>
            </button>

          </div>

          <!-- Dropdown -->
          <div *ngIf="dropdownVisible"
            class="absolute mt-16 bg-white border border-gray-200 rounded-md p-2 w-[490px] h-[250px] overflow-y-auto  shadow-lg">
            <div *ngFor="let classificacao of classificacoesDemanda"
              class="flex items-center hover:bg-gray-100 border border-gray-200">
              <label class="flex items-center w-full space-x-2 pl-4">
                <input type="checkbox" [(ngModel)]="classificacao.selected" (change)="updateLista()" />
                <span class="py-2">{{ classificacao.nome }}</span>
              </label>
            </div>
          </div>
        </div>


        <!-- Prazo -->
        <div class="flex flex-col w-full">
          <div class="flex items-center gap-2">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M1 6.25H15M8 3.625V1M3.625 3.625V1M12.375 3.625V1M1.875 15H14.125C14.3571 15 14.5796 14.9078 14.7437 14.7437C14.9078 14.5796 15 14.3571 15 14.125V3.625C15 3.39294 14.9078 3.17038 14.7437 3.00628C14.5796 2.84219 14.3571 2.75 14.125 2.75H1.875C1.64294 2.75 1.42038 2.84219 1.25628 3.00628C1.09219 3.17038 1 3.39294 1 3.625V14.125C1 14.3571 1.09219 14.5796 1.25628 14.7437C1.42038 14.9078 1.64294 15 1.875 15ZM4.5 8.875H4.50875V8.88375H4.5V8.875ZM8 8.875H8.00875V8.88375H8V8.875ZM11.5 8.875H11.5088V8.88375H11.5V8.875ZM4.5 12.375H4.50875V12.3838H4.5V12.375ZM8 12.375H8.00875V12.3838H8V12.375ZM11.5 12.375H11.5088V12.3838H11.5V12.375Z"
                stroke="#828282" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <label class="block text-md font-medium text-gray-700">Prazo</label>
          </div>
          <input type="date" class="w-full border border-gray-200 h-12 rounded-lg p-2 text-[14px]" [(ngModel)]="tarefa.prazo">
        </div>
      </div>
    </div>

    <!-- Botões de ação -->
    <div class="flex justify-end items-center border-t border-gray-200 pt-4 mt-6">
      <div class="flex gap-2">
        <button class="px-4 py-2 bg-gray-300 rounded-lg"  (click)="modalService.fechar('modalTarefa')">Cancelar</button>
        <button class="px-4 py-2 bg-green-500 text-white rounded-lg" (click)="salvarTarefa()">Salvar</button>
      </div>
    </div>
  </div>
</section>